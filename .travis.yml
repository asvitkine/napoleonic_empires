language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: v3RtbZND9U+eJ2v9q4/FGnZNonWiipUENPModCnQrDiDvV3vh05uZGZeERcgSpoAbl+qtQqWVs67vGA2Fx9f3SJWBAf08l7NaF+4mw6dOwqdlLyQUTjGua92vZcu4CbcV6mhYuGNA3RyCd1Qbm6zzTBGnWlfXTN5wNoXotsVfqbRqNqgZmaT5G2cAggO2mxfZzTdrzslj94ErNSTlivLeM5kfzEWFMbPCAHjtu3Ts/ve2PzJpnhrI5RFne003W6WUQVGvskxKqw1Ee6aDa8oMXvDOEiMWn/AG6SRjuWfhC//hx7auyIsb8xP+PNJRWAtgsOPAcFJ+ft5ky1koI/LAzDK+0PliQ3NXaJd7E6lUrcFBrf6thYIHOvImwgC7N27lG/NSqZWr0oDEKV89fM1JP37G1qLtwsdjOlCT/pmuqIc8O0vKQrkJvbpGZVmSPt8L4xmCFycaxlQ6+LxiPRLzHu9qsYgOoBVNyPuMpTN61t0S558hsasY0d6EGblV0Wwy9nAphvBVTLEaA/mbWso6V1AbwCl5QG1Wb080glSHhBsVVrz2VkpKtzY22nGz3G+bt7W/40G5/2/vdUoECaRP9MQvXWOOXRMkGzLL5K8hzDNugrNryswvr6kxG4xVsFYaLNRFjkuxb7xjxGAUdCe0lffUJGIFpgonx1CaFPxqIA=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
